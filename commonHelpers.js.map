{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-items.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  inputDate: document.getElementById('datetime-picker'),\n  startBtn: document.querySelector('button[data-start]'),\n  spanDays: document.querySelector('span[data-days]'),\n  spanHours: document.querySelector('span[data-hours]'),\n  spanMinutes: document.querySelector('span[data-minutes]'),\n  spanSeconds: document.querySelector('span[data-seconds]'),\n};\n\nlet timerId = null;\nlet isTimerStopped = false;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n\n    if (selectedDate < new Date()) {\n      ErrorData();\n      refs.startBtn.disabled = true;\n    } else {\n      options.defaultDate = selectedDate;\n      refs.startBtn.disabled = false;\n    }\n  },\n};\n\nflatpickr(refs.inputDate, options);\n\nrefs.startBtn.disabled = true;\n\nrefs.startBtn.addEventListener('click', onClickTimer);\n\nfunction onClickTimer() {\n  timerId = setInterval(() => {\n    const selectedDate = refs.inputDate.value;\n    const ms = new Date(selectedDate) - Date.now();\n\n    if (ms < 0) {\n      stopInterval();\n      clearTimerPanel();\n      return;\n    }\n    refs.startBtn.disabled = true;\n    refs.inputDate.disabled = true;\n\n    const convertDate = convertMs(ms);\n\n    refs.spanDays.textContent = convertDate.days;\n    refs.spanHours.textContent = convertDate.hours;\n    refs.spanMinutes.textContent = convertDate.minutes;\n    refs.spanSeconds.textContent = convertDate.seconds;\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction stopInterval() {\n  if (!isTimerStopped) {\n    clearInterval(timerId);\n    isTimerStopped = true;\n    WarningStopedIntervsl();\n  }\n}\n\nfunction clearTimerPanel() {\n  refs.spanDays.textContent = '00';\n  refs.spanHours.textContent = '00';\n  refs.spanMinutes.textContent = '00';\n  refs.spanSeconds.textContent = '00';\n}\n\nfunction ErrorData() {\n  iziToast.error({\n    title: 'Error',\n    message: 'Please choose a date in the future',\n  });\n}\n\nfunction WarningStopedIntervsl() {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'The timer has been stopped!',\n  });\n}\n"],"names":["refs","timerId","isTimerStopped","options","selectedDates","selectedDate","ErrorData","flatpickr","onClickTimer","ms","stopInterval","clearTimerPanel","convertDate","convertMs","days","addLeadingZero","hours","minutes","seconds","value","WarningStopedIntervsl","iziToast"],"mappings":"2GAKA,MAAMA,EAAO,CACX,UAAW,SAAS,eAAe,iBAAiB,EACpD,SAAU,SAAS,cAAc,oBAAoB,EACrD,SAAU,SAAS,cAAc,iBAAiB,EAClD,UAAW,SAAS,cAAc,kBAAkB,EACpD,YAAa,SAAS,cAAc,oBAAoB,EACxD,YAAa,SAAS,cAAc,oBAAoB,CAC1D,EAEA,IAAIC,EAAU,KACVC,EAAiB,GAErB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EAEhCC,EAAe,IAAI,MACrBC,IACAN,EAAK,SAAS,SAAW,KAEzBG,EAAQ,YAAcE,EACtBL,EAAK,SAAS,SAAW,GAE5B,CACH,EAEAO,EAAUP,EAAK,UAAWG,CAAO,EAEjCH,EAAK,SAAS,SAAW,GAEzBA,EAAK,SAAS,iBAAiB,QAASQ,CAAY,EAEpD,SAASA,GAAe,CACtBP,EAAU,YAAY,IAAM,CAC1B,MAAMI,EAAeL,EAAK,UAAU,MAC9BS,EAAK,IAAI,KAAKJ,CAAY,EAAI,KAAK,MAEzC,GAAII,EAAK,EAAG,CACVC,IACAC,IACA,MACD,CACDX,EAAK,SAAS,SAAW,GACzBA,EAAK,UAAU,SAAW,GAE1B,MAAMY,EAAcC,EAAUJ,CAAE,EAEhCT,EAAK,SAAS,YAAcY,EAAY,KACxCZ,EAAK,UAAU,YAAcY,EAAY,MACzCZ,EAAK,YAAY,YAAcY,EAAY,QAC3CZ,EAAK,YAAY,YAAcY,EAAY,OAC5C,EAAE,GAAI,CACT,CAEA,SAASC,EAAUJ,EAAI,CAOrB,MAAMK,EAAOC,EAAe,KAAK,MAAMN,EAAK,KAAG,CAAC,EAE1CO,EAAQD,EAAe,KAAK,MAAON,EAAK,MAAO,IAAI,CAAC,EAEpDQ,EAAUF,EAAe,KAAK,MAAQN,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjES,EAAUH,EACd,KAAK,MAASN,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAK,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASH,EAAeI,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAAST,GAAe,CACjBR,IACH,cAAcD,CAAO,EACrBC,EAAiB,GACjBkB,IAEJ,CAEA,SAAST,GAAkB,CACzBX,EAAK,SAAS,YAAc,KAC5BA,EAAK,UAAU,YAAc,KAC7BA,EAAK,YAAY,YAAc,KAC/BA,EAAK,YAAY,YAAc,IACjC,CAEA,SAASM,GAAY,CACnBe,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACb,CAAG,CACH,CAEA,SAASD,GAAwB,CAC/BC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,6BACb,CAAG,CACH"}